<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Graph Editor - Stylesheet Methods Demo</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #0a0a0a;
      color: #f5f6f8;
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 1.5rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    }

    h1 {
      font-size: 1.75rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      font-size: 0.95rem;
      opacity: 0.9;
    }

    .controls {
      margin-top: 1rem;
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    button {
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.3);
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.2s;
      backdrop-filter: blur(10px);
    }

    button:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
    }

    button.active {
      background: rgba(255, 255, 255, 0.95);
      color: #667eea;
    }

    main {
      flex: 1;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      padding: 1rem;
      overflow: hidden;
    }

    .editor-section {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      background: #111;
      border-radius: 0.75rem;
      padding: 1rem;
    }

    .section-title {
      font-weight: 600;
      font-size: 0.9rem;
      color: #999;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .method-badge {
      background: #667eea;
      color: white;
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
      font-size: 0.75rem;
      font-weight: 600;
    }

    graph-editor {
      flex: 1;
      border-radius: 0.5rem;
    }

    .code-example {
      background: #1a1a1a;
      padding: 0.75rem;
      border-radius: 0.5rem;
      font-family: 'Courier New', monospace;
      font-size: 0.75rem;
      color: #4ecdc4;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid #333;
    }

    @media (max-width: 1200px) {
      main {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>ðŸ“š Stylesheet Methods Demo</h1>
    <p class="subtitle">Four different ways to apply custom styles to the Graph Editor</p>
    <div class="controls">
      <button class="active" onclick="loadTheme('cyberpunk')">Cyberpunk</button>
      <button onclick="loadTheme('minimal-light')">Minimal Light</button>
      <button onclick="loadTheme('neon')">Neon</button>
      <button onclick="loadTheme('blueprint')">Blueprint</button>
    </div>
  </header>

  <main>
    <!-- Method 1: Inline Style Slot -->
    <div class="editor-section">
      <div class="section-title">
        <span>Method 1: Inline Style Slot</span>
        <span class="method-badge">HTML</span>
      </div>
      <graph-editor id="editor1">
        <style slot="stylesheet">
          :host {
            --edge-color: #ff6b6b;
            --port-color: #4ecdc4;
            --node-bg: #2a2a3e;
            --background-color: #1a1a2e;
          }
          .node .title {
            color: #ffd700;
            font-weight: bold;
          }
        </style>
      </graph-editor>
      <div class="code-example">
&lt;graph-editor&gt;
  &lt;style slot="stylesheet"&gt;
    :host {
      --edge-color: #ff6b6b;
      --port-color: #4ecdc4;
    }
  &lt;/style&gt;
&lt;/graph-editor&gt;
      </div>
    </div>

    <!-- Method 2: External CSS File -->
    <div class="editor-section">
      <div class="section-title">
        <span>Method 2: External CSS File</span>
        <span class="method-badge">HTML + File</span>
      </div>
      <graph-editor id="editor2">
        <link slot="stylesheet" href="themes/cyberpunk.css">
      </graph-editor>
      <div class="code-example">
&lt;graph-editor&gt;
  &lt;link slot="stylesheet" 
        href="themes/cyberpunk.css"&gt;
&lt;/graph-editor&gt;
      </div>
    </div>

    <!-- Method 3: JavaScript setStylesheet -->
    <div class="editor-section">
      <div class="section-title">
        <span>Method 3: JavaScript setStylesheet()</span>
        <span class="method-badge">JavaScript</span>
      </div>
      <graph-editor id="editor3"></graph-editor>
      <div class="code-example">
const css = `
  :host {
    --edge-color: #00ffff;
    --port-color: #ff00ff;
  }
`;
editor.setStylesheet(css);
      </div>
    </div>

    <!-- Method 4: Load from URL -->
    <div class="editor-section">
      <div class="section-title">
        <span>Method 4: Load from URL</span>
        <span class="method-badge">JavaScript + File</span>
      </div>
      <graph-editor id="editor4"></graph-editor>
      <div class="code-example">
await editor.loadStylesheetFromURL(
  'themes/neon.css'
);
      </div>
    </div>
  </main>

  <script src="graph-editor-unified.js"></script>
  <script>
    const editors = [
      document.getElementById('editor1'),
      document.getElementById('editor2'),
      document.getElementById('editor3'),
      document.getElementById('editor4')
    ];

    // Initialize all editors
    editors.forEach(editor => {
      editor.setConfig({
        snapRadius: 30,
        gridSize: 20,
        showGrid: true,
        edgeStyle: 'bezier',
        theme: 'dark'
      });

      createDemoGraph(editor);
    });

    // Method 3: Apply stylesheet via JavaScript
    const css3 = `
      :host {
        --background-color: #0d1117;
        --node-bg: #161b22;
        --edge-color: #58a6ff;
        --port-color: #f78166;
        --selected-color: #ffa657;
        --node-shadow: 0 0 20px rgba(88, 166, 255, 0.2);
      }
      .node .title {
        color: #58a6ff;
      }
      .port {
        box-shadow: 0 0 10px currentColor;
      }
    `;
    editors[2].setStylesheet(css3);

    // Method 4: Load from URL
    editors[3].loadStylesheetFromURL('themes/minimal-light.css');

    // Create demo graph
    function createDemoGraph(editor) {
      const node1 = editor.addNode({
        title: 'Start',
        position: { x: 50, y: 80 },
        inputs: [],
        outputs: [{ id: 'out', label: 'Out', type: 'any' }]
      });

      const node2 = editor.addNode({
        title: 'Process',
        position: { x: 200, y: 80 },
        inputs: [{ id: 'in', label: 'In', type: 'any' }],
        outputs: [{ id: 'out', label: 'Out', type: 'any' }]
      });

      const node3 = editor.addNode({
        title: 'End',
        position: { x: 350, y: 80 },
        inputs: [{ id: 'in', label: 'In', type: 'any' }],
        outputs: []
      });

      setTimeout(() => {
        editor.addEdge(node1.dataset.nodeId, node2.dataset.nodeId, 'out', 'in');
        editor.addEdge(node2.dataset.nodeId, node3.dataset.nodeId, 'out', 'in');
      }, 100);
    }

    // Theme switcher for Method 4 editor
    function loadTheme(theme) {
      // Update button states
      document.querySelectorAll('button').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');

      // Load theme in editor 4
      editors[3].loadStylesheetFromURL(`themes/${theme}.css`);
    }
  </script>
</body>
</html>
